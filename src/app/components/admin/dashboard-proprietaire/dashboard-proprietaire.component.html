<div class="dashboard-proprietaire">
  <!-- En-tête -->
  <div class="page-header">
    <div class="header-content">
      <h1>
        <i class="fas fa-user-tie"></i>
        Tableau de Bord Propriétaire
      </h1>
      <p>Gérez votre patrimoine immobilier</p>
    </div>
  </div>

  <!-- Messages d'erreur -->
  <div class="alert alert-error" *ngIf="errorMessage">
    <i class="fas fa-exclamation-triangle"></i>
    {{ errorMessage }}
  </div>

  <!-- Statistiques -->
  <div class="stats-grid" *ngIf="stats && !isLoading">
    <div class="stat-card">
      <div class="stat-icon total">
        <i class="fas fa-building"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.totalBiens }}</h3>
        <p>Biens Immobiliers</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon rented">
        <i class="fas fa-home"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.biensLoues }}</h3>
        <p>Biens Loués</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon available">
        <i class="fas fa-key"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.biensDisponibles }}</h3>
        <p>Biens Disponibles</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon revenue">
        <i class="fas fa-euro-sign"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.revenuMensuel }}€</h3>
        <p>Revenu Mensuel</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon occupation">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.tauxOccupation }}%</h3>
        <p>Taux d'Occupation</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon contracts">
        <i class="fas fa-file-contract"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.totalContrats }}</h3>
        <p>Contrats Actifs</p>
      </div>
    </div>
  </div>

  <div class="dashboard-content" *ngIf="!isLoading">
    <!-- Biens récents -->
    <div class="recent-section">
      <div class="section-header">
        <h2>
          <i class="fas fa-building"></i>
          Biens Récents
        </h2>
        <a routerLink="/proprietaire/biens" class="btn btn-outline">
          Voir tous les biens
        </a>
      </div>

      <div class="cards-grid">
        <div class="property-card" *ngFor="let bien of recentBiens">
          <div class="property-image">
            <i class="fas fa-home"></i>
            <span class="status-badge" [ngClass]="getStatusBadgeClass(bien.statut)">
              {{ bien.statut }}
            </span>
          </div>
          <div class="property-content">
            <h4>{{ bien.titre }}</h4>
            <p class="property-address">
              <i class="fas fa-map-marker-alt"></i>
              {{ bien.adresse }}, {{ bien.code_postal }} {{ bien.ville }}
            </p>
            <div class="property-details">
              <span class="detail">
                <i class="fas fa-arrows-alt"></i>
                {{ bien.surface_habitable }} m²
              </span>
              <span class="detail">
                <i class="fas fa-bed"></i>
                {{ bien.nb_chambres || 0 }} ch.
              </span>
            </div>
            <div class="property-price" *ngIf="bien.prix_location">
              {{ bien.prix_location }}€/mois
            </div>
          </div>
        </div>
      </div>

      <div class="empty-state" *ngIf="recentBiens.length === 0">
        <i class="fas fa-home"></i>
        <h4>Aucun bien immobilier</h4>
        <p>Commencez par ajouter votre premier bien immobilier.</p>
        <a routerLink="/proprietaire/biens/nouveau" class="btn btn-primary">
          <i class="fas fa-plus"></i>
          Ajouter un bien
        </a>
      </div>
    </div>

    <!-- Contrats récents -->
    <div class="recent-section">
      <div class="section-header">
        <h2>
          <i class="fas fa-file-contract"></i>
          Contrats Récents
        </h2>
        <a routerLink="/proprietaire/contrats" class="btn btn-outline">
          Voir tous les contrats
        </a>
      </div>

      <div class="contracts-list">
        <div class="contract-item" *ngFor="let contrat of recentContrats">
          <div class="contract-icon">
            <i class="fas fa-file-signature"></i>
          </div>
          <div class="contract-details">
            <h4>Contrat {{ contrat.numero_contrat }}</h4>
            <p class="property-info">{{ contrat.id_bien.titre }}</p>
            <p class="tenant-info">
              <i class="fas fa-user"></i>
              {{ contrat.id_locataire.prenom }} {{ contrat.id_locataire.nom }}
            </p>
            <div class="contract-meta">
              <span class="meta-item">
                <i class="fas fa-calendar"></i>
                Début: {{ contrat.date_debut | date:'dd/MM/yyyy' }}
              </span>
              <span class="meta-item">
                <i class="fas fa-euro-sign"></i>
                Loyer: {{ contrat.loyer_mensuel }}€
              </span>
            </div>
          </div>
          <div class="contract-status">
            <span class="status-badge" [ngClass]="getContractStatusBadgeClass(contrat.statut)">
              {{ contrat.statut }}
            </span>
          </div>
        </div>
      </div>

      <div class="empty-state" *ngIf="recentContrats.length === 0">
        <i class="fas fa-file-contract"></i>
        <h4>Aucun contrat</h4>
        <p>Vous n'avez pas encore de contrats de location.</p>
      </div>
    </div>
  </div>

  <!-- Chargement -->
  <div class="loading-state" *ngIf="isLoading">
    <i class="fas fa-spinner fa-spin"></i>
    <p>Chargement du tableau de bord...</p>
  </div>
</div>
